#!/usr/bin/env python3
"""
=============================================================================
 Licensed Materials, Property of neuraldevelopment, Munich
 Project : basefunctions
 Copyright (c) by neuraldevelopment
 All rights reserved.
 Description:
 Entry point script for demo CLI application
 Log:
 v1.0 : Initial implementation
=============================================================================
"""

# =============================================================================
# IMPORTS
# =============================================================================
# Standard Library
import sys

# Project modules
from basefunctions.cli import CLIApplication, ContextManager
from basefunctions.demo import DemoCommands


# =============================================================================
# FUNCTION DEFINITIONS
# =============================================================================


def main() -> int:
    """
    Main entry point for demo CLI.

    Returns
    -------
    int
        Exit code (0 = success, 1 = error)
    """
    try:
        # Parse command line arguments
        if len(sys.argv) < 3:
            print("Usage: demo_cli demo <command>", file=sys.stderr)
            print("Commands: help, list, list-rec", file=sys.stderr)
            return 2  # Exit code 2 for usage error

        group = sys.argv[1]
        command = sys.argv[2]

        # Validate group
        if group != "demo":
            print(f"Error: Unknown group '{group}'", file=sys.stderr)
            return 1

        # Initialize context and demo commands
        context = ContextManager(app_name="demo_cli")
        demo = DemoCommands(context)

        # Validate and execute command
        if not demo.validate_command(command):
            print(f"Error: Unknown command '{command}'", file=sys.stderr)
            print("Available commands: help, list, list-rec", file=sys.stderr)
            return 1

        # Execute command (args after command)
        args = sys.argv[3:] if len(sys.argv) > 3 else []
        demo.execute(command, args)

        return 0

    except KeyboardInterrupt:
        print("\nInterrupted by user")
        return 130  # Standard exit code for SIGINT
    except Exception as e:
        print(f"Fatal error: {e}", file=sys.stderr)
        return 1


if __name__ == "__main__":
    sys.exit(main())
